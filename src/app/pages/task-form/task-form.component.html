<div class="p-8 min-h-screen">
  <div class="max-w-md mx-auto">
    <h1 class="text-2xl font-bold mb-6">
      {{ isEdit ? "Edit Task" : "Create New Task" }}
    </h1>

    <form #taskForm="ngForm" (ngSubmit)="onSubmit(taskForm)" class="space-y-4">
      <div>
        <label for="title" class="block text-sm font-medium">Title *</label>
        <input
          id="title"
          name="title"
          type="text"
          [(ngModel)]="task.title"
          required
          class="w-full px-3 py-2 border rounded"
          placeholder="Enter task title"
        />
      </div>

      <div>
        <label for="description" class="block text-sm font-medium"
          >Description</label
        >
        <textarea
          id="description"
          name="description"
          [(ngModel)]="task.description"
          class="w-full px-3 py-2 border rounded"
          rows="3"
          placeholder="Enter task description"
        ></textarea>
      </div>

      <div>
        <label for="status" class="block text-sm font-medium">Status</label>
        <select
          id="status"
          name="status"
          [(ngModel)]="task.status"
          class="w-full px-3 py-2 border rounded"
        >
          <option value="To Do">To Do</option>
          <option value="In Progress">In Progress</option>
          <option value="Done">Done</option>
        </select>
      </div>

      <div>
        <label for="assignee" class="block text-sm font-medium">Assignee</label>
        <select
          id="assignee"
          name="assignee"
          [(ngModel)]="task.assignee"
          class="w-full px-3 py-2 border rounded"
        >
          <option value="" disabled>Select assignee</option>
          <option *ngFor="let user of users" [value]="user.userId">
            {{ user.name }} ({{ user.email }})
          </option>
        </select>
      </div>

      <div>
        <label for="dueDate" class="block text-sm font-medium">Due Date</label>
        <input
          id="dueDate"
          name="dueDate"
          type="datetime-local"
          [(ngModel)]="task.dueDate"
          class="w-full px-3 py-2 border rounded"
        />
      </div>

      <div class="flex space-x-4">
        <button
          type="submit"
          class="flex-1 py-2 px-4 bg-blue-600 text-white rounded"
          [disabled]="isLoading"
        >
          <span *ngIf="isLoading">{{
            isEdit ? "Updating..." : "Creating..."
          }}</span>
          <span *ngIf="!isLoading">{{
            isEdit ? "Update Task" : "Create Task"
          }}</span>
        </button>

        <button
          type="button"
          (click)="router.navigate(['/projects', projectId, 'tasks'])"
          class="px-4 py-2 bg-gray-500 text-white rounded"
        >
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
